(function(){"use strict";var t={9246:function(t,e,s){var r=s(144),a=s(998),n=s(3059),i=function(){var t=this,e=t._self._c;return e(a.Z,[e("NavAppBar"),e(n.Z,[e("router-view")],1)],1)},o=[],l=s(6232),u=s(5550),c=s(6190),d=s(9582),p=s(4324),g=s(5808),m=s(4525),f=s(982),h=s(4611),y=s(9093),v=s(6975),_=s(3687),Z=s(7953),x=function(){var t=this,e=t._self._c;return e(d.Z,{staticClass:"overflow-hidden"},[e(l.Z,{attrs:{app:"",color:""}},[e(u.Z,{on:{click:function(e){t.drawer=!0}}}),e(c.Z,{staticClass:"no-background-hover",attrs:{depressed:"","retain-focus-on-click":"",to:"/"}},[e(Z.qW,{staticClass:"text-capitalize grey--text"},[t._v("Chat App")])],1),e(_.Z),e(c.Z,{attrs:{href:"https://github.com/jKai-Hw/Online-Dating-App#readme",target:"_blank",text:""}},[e("span",{staticClass:"mr-2 text-capitalize"},[t._v("GitHub README")]),e(p.Z,[t._v("mdi-open-in-new")])],1)],1),e(v.Z,{attrs:{app:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[e(g.Z,[e(f.Z,t._l(t.links,(function(s){return e(m.Z,{key:s.text,attrs:{color:"red",touter:"",to:s.route}},[e(h.Z,[e(p.Z,{staticClass:"red--text"},[t._v(t._s(s.icon))])],1),e(y.V9,{staticClass:"red--text"},[t._v(t._s(s.text))])],1)})),1)],1)],1)],1)},C=[],k={name:"NavAppBar",data(){return{drawer:!1,links:[{icon:"mdi-home",text:"Home",route:"/"},{icon:"mdi-forum",text:"Talk",route:"/message-list"}]}}},b=k,w=s(1001),U=(0,w.Z)(b,x,C,!1,null,null,null),j=U.exports,M={name:"App",components:{NavAppBar:j},data:()=>({})},O=M,$=(0,w.Z)(O,i,o,!1,null,null,null),L=$.exports,D=s(8345),S=s(9256),B=s(1713),P=function(){var t=this,e=t._self._c;return e("div",{staticClass:"userList"},[e("h1",{staticClass:"subheading grey--text"},[t._v("Home")]),e(S.Z,{staticClass:"my-5"},[e(B.Z,{attrs:{wrap:""}},t._l(t.getUsers,(function(t){return e("userCard",{key:t.login.uuid,attrs:{user:t}})})),1)],1)],1)},I=[],E=s(3423),T=s(4886),A=s(9223),K=s(1267),R=s(9422),N=function(){var t=this,e=t._self._c;return e(K.Z,{staticClass:"pa-3",attrs:{xs12:"",sm6:"",md4:"",lg3:""}},[e("router-link",{staticClass:"text-decoration-none",attrs:{to:{name:"userDetails",params:{id:t.user.login.uuid}}}},[e(d.Z,{staticClass:"text-xs-center",attrs:{tile:"",color:"grey lighten-3"}},[e(R.Z,{},[e("div",{staticClass:"py-2 d-flex justify-center"},[e(E.Z,{staticClass:"profile grey lighten-2",attrs:{size:"100"}},[e("img",{attrs:{src:t.user.picture.thumbnail}})])],1)]),e(A.Z,{staticClass:"mx-4"}),e(T.EB,{staticClass:"px-6 pt-1 pb-0 text-h6"},[t._v(t._s(t.user.name.first))]),e(T.ZB,{staticClass:"px-6 pb-1"},[e("div",{staticClass:"pa-0 ma-0"},[t._v("age: "+t._s(t.user.dob.age))])]),e(A.Z,{staticClass:"mx-4"}),e(T.h7,{staticClass:"d-flex justify-space-around"},[e(c.Z,{attrs:{color:"red lighten-4 red--text",to:{name:"chatScreen",params:{id:t.user.login.uuid}}}},[e(p.Z,{attrs:{small:"",left:""}},[t._v("mdi-forum")]),e("span",[t._v("Message")])],1)],1)],1)],1)],1)},H=[],q={name:"userCard",props:{user:Object}},z=q,F=(0,w.Z)(z,N,H,!1,null,null,null),V=F.exports,W={name:"userList",created:function(){0==Object.keys(this.$store.getters.getAllUsers).length&&this.$store.dispatch("fetchUsers","https://randomuser.me/api/?results=10")},computed:{getUsers(){return Object.values(this.$store.getters.getAllUsers)}},components:{userCard:V}},Y=W,G=(0,w.Z)(Y,P,I,!1,null,null,null),J=G.exports,X=s(266),Q=s(1625),tt=s(9449),et=function(){var t=this,e=t._self._c;return e(K.Z,{staticClass:"pt-5 pa-3"},[e(d.Z,[e(B.Z,{attrs:{justify:"center"}},[e(X.Z,{attrs:{cols:"6"}},[e(Q.Z,{attrs:{src:t.getUser.picture.large,"max-height":"350",contain:""}})],1)],1),e(B.Z,{staticClass:"ma-0",attrs:{justify:"center"}},[e(T.EB,{staticClass:"pa-3"},[t._v(t._s(t.getUser.name.first))])],1),e(B.Z,{staticClass:"pb-4 ma-0",attrs:{justify:"center"}},[e(c.Z,{attrs:{color:"red lighten-4 red--text",to:{name:"chatScreen",params:{id:t.getUser.login.uuid}}}},[e(p.Z,{attrs:{small:"",left:""}},[t._v("mdi-forum")]),e("span",[t._v("Message")])],1)],1),e(tt.Z,{scopedSlots:t._u([{key:"default",fn:function(){return[e("tbody",[e("tr",[e("td",[t._v("gender")]),e("td",[t._v(t._s(t.getUser.gender))])])]),e("tbody",[e("tr",[e("td",[t._v("age")]),e("td",[t._v(t._s(t.getUser.dob.age))])])]),e("tbody",[e("tr",[e("td",[t._v("country")]),e("td",[t._v(t._s(t.getUser.location.country))])])]),e("tbody",[e("tr",[e("td",[t._v("state")]),e("td",[t._v(t._s(t.getUser.location.state))])])]),e("tbody",[e("tr",[e("td",[t._v("city")]),e("td",[t._v(t._s(t.getUser.location.city))])])]),e("tbody",[e("tr",[e("td",[t._v("email")]),e("td",[t._v(t._s(t.getUser.email))])])])]},proxy:!0}])})],1)],1)},st=[],rt={computed:{getUser(){return this.$store.getters.getUserById(this.$route.params.id)}}},at=rt,nt=(0,w.Z)(at,et,st,!1,null,null,null),it=nt.exports,ot=s(8271),lt=s(113),ut=function(){var t=this,e=t._self._c;return e("div",{ref:"scroll",staticClass:"pa-0 ma-0 overflow-y-auto"},[e(l.Z,{attrs:{dense:"",flat:"",color:"grey lighten-2"}},[e(p.Z,{staticClass:"rotate-180 pl-5",on:{click:function(e){return t.$router.back()}}},[t._v("mdi-logout")]),e(Z.qW,{staticClass:"pl-1"},[t._v(t._s(t.getUser.name.first+" "+t.getUser.name.last))]),e(_.Z)],1),e("div",{staticClass:"chat-screen__name-bar pa-0 ma-0"},[e(B.Z,{staticClass:"pt-5 pa-2 ma-0"},[e(X.Z,{staticClass:"pa-2",attrs:{xs:"12"}},t._l(t.getMsgList,(function(t){return e("messageBox",{key:t.order,attrs:{messages:t}})})),1)],1)],1),e(ot.Z,{staticClass:"mx-0",attrs:{app:"",outlined:"",color:"grey lighten-2"}},[e(B.Z,{staticClass:"d-flex align-content-center justify-center",attrs:{"no-gutters":""}},[e(X.Z,{staticClass:"pr-2"},[e(lt.Z,{attrs:{"auto-grow":"",dense:"",outlined:"",rows:"1","hide-details":"false",label:"Enter message..."},on:{keydown:[function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")||e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:t.keyDownEnter.apply(null,arguments)},function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:e.shiftKey?t.keyEnterShift.apply(null,arguments):null}],keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")||e.ctrlKey||e.shiftKey||e.altKey||e.metaKey?null:t.keyUpEnter.apply(null,arguments)}},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}})],1),e(c.Z,{staticClass:"px-0 d-flex align-content-center",attrs:{depressed:"",color:"gray lighten-4","min-width":"0"},on:{click:function(e){return t.sendMessage()}}},[e(p.Z,{staticClass:"color-gray",attrs:{large:""}},[t._v("mdi-send-circle-outline")])],1)],1)],1)],1)},ct=[],dt=function(){var t=this,e=t._self._c;return e("div",[0==t.messages.didISent?e(B.Z,{staticClass:"ma-0",attrs:{wrap:""}},[e("router-link",{staticClass:"text-decoration-none",attrs:{to:{name:"userDetails",params:{id:t.getUser.login.uuid}}}},[e(E.Z,{staticClass:"me-1"},[e("img",{attrs:{src:t.getUser.picture.thumbnail}})])],1),e("div",[e(d.Z,{staticClass:"mb-1 card-opponent"},[e(T.ZB,{staticClass:"pa-2"},[e("p",{staticClass:"font-message"},[t._v(t._s(t.messages.text))])])],1),e(B.Z,{staticClass:"ma-0"},[e("p",{staticClass:"font-date ma-0 pl-1"},[t._v(t._s(t.messages.date))])])],1)],1):e(B.Z,{staticClass:"justify-end ma-0",attrs:{wrap:""}},[e("div",{},[e(d.Z,{staticClass:"mb-1",attrs:{color:"red lighten-4 card-mine"}},[e(T.ZB,{staticClass:"pa-2"},[e("p",{staticClass:"font-message"},[t._v(t._s(t.messages.text))])])],1),e(B.Z,{staticClass:"justify-end ma-0"},[e("p",{staticClass:"font-date ma-0 pr-1"},[t._v(t._s(t.messages.date))])])],1)])],1)},pt=[],gt={name:"messageBox",props:{messages:Object,user:Object},computed:{getUser(){return this.$store.getters.getUserById(this.$route.params.id)}}},mt=gt,ft=(0,w.Z)(mt,dt,pt,!1,null,null,null),ht=ft.exports;class yt{constructor(t,e,s,r){this.order=t,this.id=e,this.text=s,this.didISent=r,this.date="",this.dateNum=0}static getDateString(){let t=new Date,e=t.getFullYear(),s=t.getMonth()+1,r=t.getDate(),a=t.getHours(),n=t.getMinutes(),i=t.getSeconds(),o=`${e}/${s}/${r}/ ${a}:${n}:${i}`;return o}}var vt={name:"chatScreen",data(){return{order:0,text:"",keyDownCode:0,links:[{icon:"mdi-logout",text:"Logout",route:"/"},{icon:"mdi-forum",text:"Talk",route:"/message-list"}]}},computed:{getMsgList(){return this.$store.getters["messages/getMessagesById"](this.$route.params.id)},getUser(){return this.$store.getters.getUserById(this.$route.params.id)}},updated(){this.$nextTick((function(){let t=this.$refs.scroll;if(!t)return t.scrollTop=t.scrollHeight}))},methods:{sendMessage:function(){if(""==this.text)return void alert("Type the message you want to send.");let t=new yt(this.order,this.$route.params.id,this.text,!0);this.text="",t.date=yt.getDateString();let e=(new Date).getTime();t.dateNum=e,this.$store.commit("messages/setMessages",t),this.$store.dispatch("messages/setReply",t),this.order+=2},keyDownEnter(t){this.keyDownCode=t.keyCode,t.preventDefault()},keyUpEnter(t){229!==this.keyDownCode&&(t.preventDefault(),this.sendMessage())},keyEnterShift(){console.log("shift,enter")}},components:{messageBox:ht}},_t=vt,Zt=(0,w.Z)(_t,ut,ct,!1,null,null,null),xt=Zt.exports,Ct=function(){var t=this,e=t._self._c;return e(K.Z,{staticClass:"pa-3"},[e(tt.Z,{scopedSlots:t._u([{key:"default",fn:function(){return[e("tbody",t._l(t.getLastMsgId,(function(t){return e("personBox",{key:t,attrs:{uuid:t}})})),1)]},proxy:!0}])})],1)},kt=[],bt=function(){var t=this,e=t._self._c;return e("tr",{},[e("router-link",{staticClass:"text-decoration-none",attrs:{to:{name:"chatScreen",params:{id:t.getUser.login.uuid}}}},[e("div",{staticClass:"d-flex align-center mb-1"},[e("router-link",{staticClass:"text-decoration-none",attrs:{to:{name:"userDetails",params:{id:t.getUser.login.uuid}}}},[e(E.Z,{staticClass:"me-2"},[e("img",{attrs:{src:t.getUser.picture.thumbnail}})])],1),e("div",{},[e("div",{staticClass:"d-flex align-center text-center pb-1"},[e("h4",{staticClass:"font-name pe-5"},[t._v(t._s(t.getUser.name.first))]),e("p",{staticClass:"font-date"},[t._v(t._s(t.getLastMsg.date))])]),e(B.Z,{staticClass:"ma-0"},[e("p",{staticClass:"font-text ma-0"},[t._v(t._s(t.getLastMsg.text))])])],1)],1)])],1)},wt=[],Ut={name:"personBox",data(){return{messages:Object,order:0,text:"",keyDownCode:0}},props:{uuid:String},computed:{getLastMsg(){return this.$store.getters["messages/getLatestMessageById"](this.uuid)},getUser(){return this.$store.getters.getUserById(this.uuid)}}},jt=Ut,Mt=(0,w.Z)(jt,bt,wt,!1,null,null,null),Ot=Mt.exports,$t={name:"messageList",computed:{getLastMsgId(){return this.$store.getters["messages/getLatestMsgIdList"]}},components:{personBox:Ot}},Lt=$t,Dt=(0,w.Z)(Lt,Ct,kt,!1,null,null,null),St=Dt.exports;r.ZP.use(D.ZP);const Bt=[{path:"/",name:"userList",component:J},{path:"/user/:id",name:"userDetails",component:it},{path:"/user/:id/chat",name:"chatScreen",component:xt},{path:"/message-list",name:"recipientList",component:St}],Pt=new D.ZP({mode:"history",base:"/Online-Dating-App/",routes:Bt});var It=Pt,Et=s(629);const Tt={state:{users:{}},getters:{getAllUsers(t){return t.users},getUserById:t=>e=>t.users[e]},mutations:{setUsers(t,e){let s={};for(let r=0;r<e.length;r++)s[e[r].login.uuid]=e[r];t.users=s}},actions:{async fetchUsers(t,e){const s=await fetch(e),r=await s.json();t.commit("setUsers",r.results)}}};s(7658);const At={namespaced:!0,state:{msgListPerRecipient:{}},getters:{getMessagesById:t=>e=>t.msgListPerRecipient[e],getLatestMessageById:t=>e=>t.msgListPerRecipient[e][t.msgListPerRecipient[e].length-1],getLatestMsgIdList(t){let e=t.msgListPerRecipient,s=Object.keys(e).map((t=>({key:t,value:e[t][e[t].length-1].dateNum})));s.sort(((t,e)=>e.value-t.value));let r=[];for(let a=0;a<s.length;a++)r.push(s[a].key);return r}},mutations:{setMessages(t,e){let s=t.msgListPerRecipient;null==s[e.id]?s[e.id]=[e]:s[e.id].push(e),t.msgListPerRecipient=Object.assign({},s)}},actions:{setReply(t,e){setTimeout((()=>{let s=new FormData;s.append("apikey","DZZtDiyVYJmlqXaj77rMdSeCC2TI9hz0"),s.append("query",e.text),fetch("https://api.a3rt.recruit.co.jp/talk/v1/smalltalk",{method:"POST",body:s}).then((t=>t.json())).then((s=>{let r=s.results[0].reply,a=new yt(e.order+1,e.id,r,!1);a.date=yt.getDateString();let n=(new Date).getTime();a.dateNum=n,t.commit("setMessages",a)}))}),100)}}};r.ZP.use(Et.ZP);var Kt=new Et.ZP.Store({state:{},getters:{},mutations:{},actions:{},modules:{users:Tt,messages:At}}),Rt=s(8864);r.ZP.use(Rt.Z);var Nt=new Rt.Z({});r.ZP.config.productionTip=!1,new r.ZP({router:It,store:Kt,vuetify:Nt,render:t=>t(L)}).$mount("#app")}},e={};function s(r){var a=e[r];if(void 0!==a)return a.exports;var n=e[r]={exports:{}};return t[r](n,n.exports,s),n.exports}s.m=t,function(){var t=[];s.O=function(e,r,a,n){if(!r){var i=1/0;for(c=0;c<t.length;c++){r=t[c][0],a=t[c][1],n=t[c][2];for(var o=!0,l=0;l<r.length;l++)(!1&n||i>=n)&&Object.keys(s.O).every((function(t){return s.O[t](r[l])}))?r.splice(l--,1):(o=!1,n<i&&(i=n));if(o){t.splice(c--,1);var u=a();void 0!==u&&(e=u)}}return e}n=n||0;for(var c=t.length;c>0&&t[c-1][2]>n;c--)t[c]=t[c-1];t[c]=[r,a,n]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var r in e)s.o(e,r)&&!s.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={826:0};s.O.j=function(e){return 0===t[e]};var e=function(e,r){var a,n,i=r[0],o=r[1],l=r[2],u=0;if(i.some((function(e){return 0!==t[e]}))){for(a in o)s.o(o,a)&&(s.m[a]=o[a]);if(l)var c=l(s)}for(e&&e(r);u<i.length;u++)n=i[u],s.o(t,n)&&t[n]&&t[n][0](),t[n]=0;return s.O(c)},r=self["webpackChunkchat_app"]=self["webpackChunkchat_app"]||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))}();var r=s.O(void 0,[998],(function(){return s(9246)}));r=s.O(r)})();
//# sourceMappingURL=index.b18b2854.js.map